version: '3.4'
volumes:
  sql_data: {}

services:
  FIAP.Pos.Hackathon.Micro.Servico.Processamento.Imagens.Principal.api:
    image: ${DOCKER_REGISTRY-}fiapposhackathonmicroservicoprocessamentoimagensprincipalapi
    depends_on:
      - mongodb
    build:
      context: ../
      dockerfile: Src/Api/Dockerfile
  mongodb:
    image: mongo:latest
    ports:
      - "27017:27017"
    volumes:
      - sql_data:/data/db
  azurite:
    image: mcr.microsoft.com/azure-storage/azurite
    command: azurite-blob --blobHost 0.0.0.0 --blobPort 10000
    ports:
      - "10000:10000"
      - "10001:10001"
  servicebus:
    image: mcr.microsoft.com/azure-messaging/servicebus-emulator
    ports:
      - "5671:5671"
      - "5672:5672"
      - "9093:9093"
